<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One Page Scroll</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- fullPage.js CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/4.0.13/fullpage.min.css" />

  <!-- 전역 스타일 -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Nunito', sans-serif;
      overflow: hidden; /* fullPage.js 사용 시 필요 */
    }
    .section {
      width: 100%;
    }
    /* 추가 스타일은 그대로 유지합니다 */

    /* Section 2 스타일 */
    #section2 {
      background-color: #f8f9fa;
    }
    /* FullCalendar 스타일 조정 */
    .fc-toolbar-title {
      font-size: 1.75rem;
      font-weight: 600;
      color: #2C3E50;
    }
    .fc-button {
      background-color: #6c757d !important;
      border: none !important;
      padding: 10px 20px !important;
      color: white !important;
      font-weight: 600 !important;
      border-radius: 5px !important;
    }
    .fc-button:hover {
      background-color: #5a6268 !important;
    }
    .fc-event {
      background-color: skyblue !important;
      border: none !important;
      color: white !important;
      font-weight: 600 !important;
      padding: 2px 5px !important;
      border-radius: 4px !important;
    }
    .fc-today {
      background-color: rgba(108, 117, 125, 0.2) !important;
    }
  </style>
</head>
<body>
  <!-- fullPage.js 컨테이너로 변경 -->
  <div id="fullpage">
    <!-- Section 1 -->
    <div class="section" data-anchor="section1" id="section1">
      <div class="relative flex items-center justify-center h-full">
        <!-- 배경 이미지 -->
        <div class="absolute inset-0 bg-cover bg-center z-0" style="background-image: url('airforcebg.svg');"></div>
        <!-- 콘텐츠 -->
        <div class="content-wrapper text-center z-10">
          <h1 class="text-5xl font-bold text-blue-600">Section 1</h1>
          <p class="mt-4 text-gray-700">여기에 소개글이나 간단한 내용을 추가할 수 있습니다.</p>
        </div>
      </div>
    </div>

    <!-- Section 2 -->
    <div class="section" data-anchor="section2" id="section2">
      <!-- Section 2 내용 시작 -->
      <div class="container mx-auto py-8">
        <h1 class="text-3xl font-bold text-center text-blue-600 mb-6">군대 지원 정보 캘린더</h1>
        <div id='calendar' class="bg-white p-4 rounded-lg shadow-lg"></div>
      </div>

      <!-- Section 2 스크립트 -->
      <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');

          var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'ko',
            events: '/calendar/events/',  // Django에서 데이터를 가져올 URL
            headerToolbar: {
              left: 'prev,next today',
              center: 'title',
              right: 'dayGridMonth'
            },
            buttonText: {
              today: '오늘',
              month: '월',
              week: '주',
              day: '일'
            },
            eventClick: function(info) {
              var modalHtml = `
                <div class="fixed inset-0 flex items-center justify-center z-50">
                  <div class="bg-black opacity-50 absolute inset-0"></div>
                  <div class="bg-white p-6 rounded-lg shadow-lg z-10 max-w-md w-full">
                    <div class="flex justify-between items-center mb-4">
                      <h5 class="text-xl font-bold">${info.event.title}</h5>
                      <button class="text-gray-500 hover:text-gray-700" onclick="document.getElementById('eventModal').remove();">×</button>
                    </div>
                    <div>
                      <p><strong>시작일:</strong> ${info.event.start.toLocaleDateString()}</p>
                      <p><strong>종료일:</strong> ${info.event.end ? info.event.end.toLocaleDateString() : 'N/A'}</p>
                    </div>
                    <div class="mt-4 text-right">
                      <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" onclick="document.getElementById('eventModal').remove();">닫기</button>
                    </div>
                  </div>
                </div>
              `;
              var modalContainer = document.createElement('div');
              modalContainer.id = 'eventModal';
              modalContainer.innerHTML = modalHtml;
              document.body.appendChild(modalContainer);
            }
          });

          calendar.render();
        });
      </script>
      <!-- Section 2 내용 끝 -->
    </div>

    <!-- Section 3 -->
    <div class="section" data-anchor="section3" id="section3">
      <!-- Section 3 내용 시작 -->
      <div class="container mx-auto p-8 max-w-2xl">
        <!-- 카드 섹션 -->
        <div class="bg-white p-8 rounded-lg shadow-lg">
          <!-- 제목 -->
          <h1 class="text-3xl font-bold text-center text-blue-600 mb-6">공군 일반 기술병 점수 계산기</h1>
          <p class="text-center text-gray-600 mb-10">아래에서 골라 합격을 예측해보세요!</p>
          
          <!-- 폼 시작 -->
          <form method="POST" class="space-y-8" id="score-form">
            {% csrf_token %}
            
            <!-- 자격/면허 점수 -->
            <div>
              <label for="license_score" class="block text-lg font-semibold text-gray-700 mb-2">자격/면허 점수</label>
              <p class="text-sm text-gray-500 mb-3">기술 자격증에 따라 점수가 다르게 부여됩니다. (최대 70점)</p>
              <select class="block w-full p-3 border rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500" name="license_score" required>
                <option value="0">자격증 없음 (0점)</option>
                <option value="60">일반자격증 - L2 (60점)</option>
                <option value="62">일반자격증 - L4, L3 (62점)</option>
                <option value="64">일반자격증 - L6, L5 (64점)</option>
                <option value="66">국가기술자격증 - 기능사 (66점)</option>
                <option value="68">국가기술자격증 - 산업기사 (68점)</option>
                <option value="70">국가기술자격증 - 기사 이상 (70점)</option>
              </select>
            </div>

            <!-- 출결 점수 -->
            <div>
              <label for="attendance_score" class="block text-lg font-semibold text-gray-700 mb-2">출결 점수</label>
              <p class="text-sm text-gray-500 mb-3">결석 일수에 따른 점수 (최대 20점)</p>
              <select class="block w-full p-3 border rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500" name="attendance_score" required>
                <option value="16">결석 7일 이상 (16점)</option>
                <option value="17">결석 5~6일 (17점)</option>
                <option value="18">결석 3~4일 (18점)</option>
                <option value="19">결석 1~2일 (19점)</option>
                <option value="20">결석 0일 (20점)</option>
              </select>
            </div>

            <!-- 면접 점수 -->
            <div>
              <label for="interview_score" class="block text-lg font-semibold text-gray-700 mb-2">면접 점수</label>
              <p class="text-sm text-gray-500 mb-3">면접 평가 결과에 따른 점수 (최대 35점)</p>
              <select class="block w-full p-3 border rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500" name="interview_score" required>
                <option value="25">면접 평가 부족 (25점)</option>
                <option value="30">면접 평가 보통 (30점)</option>
                <option value="35">면접 평가 우수 (35점)</option>
              </select>
            </div>

            <!-- 가산점 -->
            <div>
              <label for="additional_score" class="block text-lg font-semibold text-gray-700 mb-2">가산점</label>
              <p class="text-sm text-gray-500 mb-3">최대 15점, 여러 항목을 선택할 수 있습니다.</p>
              <div class="grid grid-cols-1 gap-2">
                <div class="flex items-center">
                  <input type="checkbox" name="additional_score[]" value="1" id="option9" class="mr-2">
                  <label for="option9">병역진로설계 군 추천특기 (1점)</label>
                </div>
                <div class="flex items-center">
                  <input type="checkbox" name="additional_score[]" value="2" id="option6" class="mr-2">
                  <label for="option6">다자녀(2인) 가정자녀 (2점)</label>
                </div>
                <div class="flex items-center">
                  <input type="checkbox" name="additional_score[]" value="2" id="option10" class="mr-2">
                  <label for="option10">한국사능력검정 1, 2급 (2점)</label>
                </div>
                <div class="flex items-center">
                  <input type="checkbox" name="additional_score[]" value="4" id="option1" class="mr-2">
                  <label for="option1">국가 유공자 자녀/손자녀 (4점)</label>
                </div>
                <div class="flex items-center">
                  <input type="checkbox" name="additional_score[]" value="4" id="option2" class="mr-2">
                  <label for="option2">질병치유 자진입대 (4점)</label>
                </div>
                <div class="flex items-center">
                  <input type="checkbox" name="additional_score[]" value="4" id="option3" class="mr-2">
                  <label for="option3">현역병 입영대상으로 역종 변경 (4점)</label>
                </div>
              </div>
            </div>

            <!-- 계산하기 버튼 -->
            <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition duration-300">점수 계산하기</button>

            <!-- 초기화 버튼 -->
            <button type="button" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold mt-4 transition duration-300" onclick="resetForm();">초기화</button>

            <!-- 결과를 표시할 영역 -->
            <div id="result" class="mt-8 bg-green-100 p-4 rounded-lg text-center text-lg"></div>
          </form>
        </div>
      </div>

      <!-- Section 3 스크립트 -->
      <script>
        // 폼 초기화 함수
        function resetForm() {
          document.getElementById('score-form').reset();
          document.getElementById('result').innerHTML = '';
        }

        // 폼 제출 이벤트 핸들러
        document.getElementById('score-form').addEventListener('submit', function(event) {
          event.preventDefault();  // 기본 동작 방지
      
          const formData = new FormData(this);  // 폼 데이터 수집

          // 가산점 합계 계산
          let additionalScores = formData.getAll('additional_score[]').map(Number);
          let additionalScoreTotal = additionalScores.reduce((a, b) => a + b, 0);

          // 총점 계산
          let licenseScore = Number(formData.get('license_score'));
          let attendanceScore = Number(formData.get('attendance_score'));
          let interviewScore = Number(formData.get('interview_score'));
          let totalScore = licenseScore + attendanceScore + interviewScore + additionalScoreTotal;

          // 결과 표시
          document.getElementById('result').innerHTML = `
            <p>총점: ${totalScore}점</p>
            <p>결과: ${totalScore >= 100 ? '합격 예상' : '불합격 예상'}</p>
            <p>예상 커트라인: 100점</p>
            <p>가장 최근 커트라인: 95점</p>
          `;
        });
      </script>
      <!-- Section 3 내용 끝 -->
    </div>

    <!-- Section 4 -->
    <div class="section" data-anchor="section4" id="section4">
      <div class="flex items-center justify-center h-screen bg-blue-100">
        <h1 class="text-5xl font-bold text-blue-600">Section 4</h1>
      </div>
    </div>
  </div>

  <!-- fullPage.js JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/4.0.13/fullpage.min.js"></script>
  <script>
    new fullpage('#fullpage', {
      autoScrolling: true,
      navigation: true, // 네비게이션 점을 표시하려면 true로 설정
      anchors: ['section1', 'section2', 'section3', 'section4'],
      navigationTooltips: ['Section 1', 'Section 2', 'Section 3', 'Section 4'],
      showActiveTooltip: true,
      // 기타 옵션을 필요에 따라 추가하십시오
    });
  </script>
</body>
</html>
